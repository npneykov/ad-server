{% extends "base.html" %}

{% block title %}{% block page_title %}{% endblock %}{% endblock %}

{% block description %}{{ description or 'Practical guides and tools for display ads, banners, and open-source ad serving.' }}{% endblock %}

{% block extra_meta %}
<meta property="og:type" content="article">
<meta property="og:site_name" content="Ad Server">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://ad-server.fly.dev/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Blog",
      "item": "https://ad-server.fly.dev/blog"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ title or 'Post' }}"
    }
  ]
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ title or 'Ad Server Blog Post' }}",
  "description": "{{ description or 'A practical article about ad serving and banner tooling.' }}",
  "author": {
    "@type": "Person",
    "name": "{{ author or 'Ad Server' }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Ad Server",
    "logo": {
      "@type": "ImageObject",
      "url": "https://ad-server.fly.dev/static/images/logo.png"
    }
  },
  "image": "{{ og_image or 'https://ad-server.fly.dev/static/images/og-default.png' }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ request.url }}"
  },
  "datePublished": "{{ published or '' }}",
  "dateModified": "{{ modified or published or '' }}"
}
</script>
{% endblock %}

{% block og_title %}{{ title or 'Ad Server Blog' }}{% endblock %}
{% block og_description %}{{ description or 'Practical guides and tools for display ads, banners, and open-source ad serving.' }}{% endblock %}
{% block og_url %}{{ request.url }}{% endblock %}
{% block og_image %}{{ og_image or 'https://ad-server.fly.dev/static/images/og-default.png' }}{% endblock %}

{% block twitter_title %}{{ title or 'Ad Server Blog' }}{% endblock %}
{% block twitter_description %}{{ description or 'Practical guides and tools for display ads, banners, and open-source ad serving.' }}{% endblock %}
{% block twitter_image %}{{ og_image or 'https://ad-server.fly.dev/static/images/og-default.png' }}{% endblock %}

{% block content %}
<article style="max-width: 800px; margin: 0 auto;">

    <!-- Article Header -->
    <header style="padding: var(--spacing-xl) 0; border-bottom: 1px solid var(--gray-200); margin-bottom: var(--spacing-2xl);">
        <div style="margin-bottom: var(--spacing-md);">
            <a href="/blog" style="color: var(--primary); text-decoration: none; font-weight: 500; font-size: 0.9375rem; display: inline-flex; align-items: center; transition: var(--transition);">
                <span style="margin-right: 0.5rem;">←</span> Back to Blog
            </a>
        </div>
        <h1 style="font-size: 2.25rem; line-height: 1.3; margin: var(--spacing-lg) 0; color: var(--gray-900); font-weight: 700;">
            {% block header_title %}{% endblock %}
        </h1>
        {% if published %}
        <div style="display: flex; gap: var(--spacing-md); align-items: center; font-size: 0.875rem; color: var(--gray-500); margin-top: var(--spacing-md);">
            <span style="display: inline-flex; align-items: center;">
                <svg style="width: 16px; height: 16px; margin-right: 6px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                {{ published }}
            </span>
            {% if author %}
            <span>·</span>
            <span>{{ author }}</span>
            {% endif %}
        </div>
        {% endif %}
    </header>

    <!-- Article Content -->
    <div class="card mt-xl" style="box-shadow: none; border: none;">
        <div style="padding: var(--spacing-xl);">
            <div class="article-content">
                {% block article_content %}{% endblock %}
            </div>
        </div>
    </div>

    <!-- Article Navigation -->
    <section class="mt-xl" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
        <a href="/blog" class="btn btn-secondary">← All Articles</a>
        <a href="/tools" class="btn btn-secondary">Try Ad Tools</a>
        <a href="/publisher" class="btn btn-secondary">For Publishers</a>
    </section>

    <!-- Related Articles CTA -->
    <section class="cta-box mt-xl">
        <h2>Keep Reading</h2>
        <p>
            Explore more articles about ad testing, optimization, and best practices.
        </p>
        <div style="margin-top: 1.5rem;">
            <a href="/blog" class="btn btn-primary">View All Articles</a>
        </div>
    </section>

</article>

<style>
/* Article Content Styling */
.article-content {
    color: var(--gray-700);
    line-height: 1.8;
    font-size: 1.0625rem;
}

.article-content h2 {
    color: var(--gray-900);
    font-size: 1.75rem;
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-lg);
    font-weight: 700;
    border-left: 4px solid var(--primary);
    padding-left: var(--spacing-md);
}

.article-content h3 {
    color: var(--gray-900);
    font-size: 1.375rem;
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-md);
    font-weight: 600;
}

.article-content p {
    margin-bottom: var(--spacing-lg);
    line-height: 1.8;
}

.article-content ul,
.article-content ol {
    margin-bottom: var(--spacing-lg);
    padding-left: var(--spacing-xl);
}

.article-content li {
    margin-bottom: var(--spacing-sm);
    line-height: 1.8;
}

.article-content a {
    color: var(--primary);
    text-decoration: underline;
    transition: var(--transition);
}

.article-content a:hover {
    color: var(--primary-dark);
}

.article-content code {
    background: var(--gray-100);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-family: var(--font-mono);
    font-size: 0.9375rem;
    color: var(--gray-800);
}

.article-content pre {
    background: var(--gray-900);
    color: var(--gray-100);
    padding: var(--spacing-lg);
    border-radius: var(--radius-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-lg);
}

.article-content pre code {
    background: transparent;
    padding: 0;
    color: inherit;
}

.article-content blockquote {
    border-left: 4px solid var(--primary);
    padding-left: var(--spacing-lg);
    margin: var(--spacing-xl) 0;
    color: var(--gray-600);
    font-style: italic;
}

.article-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    margin: var(--spacing-xl) 0;
    box-shadow: var(--shadow-md);
}

.article-content table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--spacing-xl) 0;
}

.article-content table th,
.article-content table td {
    padding: var(--spacing-md);
    border: 1px solid var(--gray-200);
    text-align: left;
}

.article-content table th {
    background: var(--gray-50);
    font-weight: 600;
    color: var(--gray-900);
}

.article-content strong {
    color: var(--gray-900);
    font-weight: 600;
}
</style>
{% endblock %}
